<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 14 VisionEval Module Build Process | VisionEval User Guide</title>
<meta name="author" content="VisionEval Pooled Fund Team">
<meta name="description" content="knitr::opts_chunk$set(echo = TRUE, results=‘hide’)  14.1 (Re)Building VisionEval This chapter describes the build process for VisionEval. The VisionEval “build process” (re)builds VisionEval...">
<meta name="generator" content="bookdown 0.42 with bs4_book()">
<meta property="og:title" content="Chapter 14 VisionEval Module Build Process | VisionEval User Guide">
<meta property="og:type" content="book">
<meta property="og:url" content="https://visioneval.org/docs/ve-buildprocess.html">
<meta property="og:image" content="https://visioneval.org/docs/images/cover.png">
<meta property="og:description" content="knitr::opts_chunk$set(echo = TRUE, results=‘hide’)  14.1 (Re)Building VisionEval This chapter describes the build process for VisionEval. The VisionEval “build process” (re)builds VisionEval...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 14 VisionEval Module Build Process | VisionEval User Guide">
<meta name="twitter:description" content="knitr::opts_chunk$set(echo = TRUE, results=‘hide’)  14.1 (Re)Building VisionEval This chapter describes the build process for VisionEval. The VisionEval “build process” (re)builds VisionEval...">
<meta name="twitter:image" content="https://visioneval.org/docs/images/cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.7.0/transition.js"></script><script src="libs/bs3compat-0.7.0/tabs.js"></script><script src="libs/bs3compat-0.7.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet">
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start flex-column justify-content-between">
      <div class="p-2"><img id="cover" class="d-none d-lg-block" src="images/cover-small.png"></div>
      <div class="p-2"><h1>
<a href="index.html" title="">VisionEval User Guide</a>
      </h1></div>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome</a></li>
<li><a class="" href="getting-started.html"><span class="header-section-number">1</span> Getting Started</a></li>
<li><a class="" href="detailed-installation.html"><span class="header-section-number">2</span> Detailed Installation</a></li>
<li><a class="" href="conceptprimer.html"><span class="header-section-number">3</span> Concept Primer</a></li>
<li><a class="" href="tutorial.html"><span class="header-section-number">4</span> VisionEval Tutorial</a></li>
<li><a class="" href="picking-a-model.html"><span class="header-section-number">5</span> Picking a Model</a></li>
<li><a class="" href="model-geography-and-years.html"><span class="header-section-number">6</span> Model Geography and Years</a></li>
<li><a class="" href="model-inputs.html"><span class="header-section-number">7</span> Model Inputs</a></li>
<li><a class="" href="validation-and-troubleshooting.html"><span class="header-section-number">8</span> Validation and Troubleshooting</a></li>
<li><a class="" href="developing-scenarios.html"><span class="header-section-number">9</span> Developing Scenarios</a></li>
<li><a class="" href="verspm.html"><span class="header-section-number">10</span> VERSPM Model Details</a></li>
<li><a class="" href="vestate.html"><span class="header-section-number">11</span> VE-State Model Details</a></li>
<li><a class="" href="verpat.html"><span class="header-section-number">12</span> VERPAT Model Details</a></li>
<li><a class="" href="ve-estimation.html"><span class="header-section-number">13</span> Estimation in VisionEval</a></li>
<li><a class="active" href="ve-buildprocess.html"><span class="header-section-number">14</span> VisionEval Module Build Process</a></li>
<li><a class="" href="common-use-cases.html"><span class="header-section-number">15</span> Common Use Cases</a></li>
<li><a class="" href="api-documentation.html"><span class="header-section-number">16</span> API Documentation</a></li>
<li><a class="" href="software-framework.html"><span class="header-section-number">17</span> Software Framework</a></li>
<li><a class="" href="topic-index.html"><span class="header-section-number">18</span> VisionEval Topic Index</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/VisionEval/VisionEval-Docs/">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="ve-buildprocess" class="section level1" number="14">
<h1>
<span class="header-section-number">14</span> VisionEval Module Build Process<a class="anchor" aria-label="anchor" href="#ve-buildprocess"><i class="fas fa-link"></i></a>
</h1>
<p>knitr::opts_chunk$set(echo = TRUE, results=‘hide’)</p>
<div id="rebuilding-visioneval" class="section level2" number="14.1">
<h2>
<span class="header-section-number">14.1</span> (Re)Building VisionEval<a class="anchor" aria-label="anchor" href="#rebuilding-visioneval"><i class="fas fa-link"></i></a>
</h2>
<p>This chapter describes the build process for VisionEval. The VisionEval “build process” (re)builds VisionEval packages to incorporate default, localized, or custom data in the module’s model estimation and data processing steps in order to update data resources and estimated model coefficients.</p>
<p>This chapter sets out the process for updating these datasets that VisionEval modules use during any of the model runs.</p>
<p>For the VisionEval models to access any of these updated data requires re-building of the VisionEval package source. The reason that a package must be rebuilt before it is available for use in VisionEval is that VisionEval creates its own R environment with its own VisionEval modules built as R packages.</p>
<div id="what-is-an-r-package" class="section level3" number="14.1.1">
<h3>
<span class="header-section-number">14.1.1</span> What is an R “package”?<a class="anchor" aria-label="anchor" href="#what-is-an-r-package"><i class="fas fa-link"></i></a>
</h3>
<p>R is a community-based project and depends upon a community of re-usable, reproducible, and shareable code. To facilitate this, R uses a standardized method for bundling a collection of code and data into a built into a shareable binary “package”. Packages can then be downloaded and installed into your local R library. An R environment can only access the packages installed in a local R library.</p>
</div>
<div id="why-is-this-relevant" class="section level3" number="14.1.2">
<h3>
<span class="header-section-number">14.1.2</span> Why is this relevant?<a class="anchor" aria-label="anchor" href="#why-is-this-relevant"><i class="fas fa-link"></i></a>
</h3>
<p>VisionEval relies on this fundamental package framework for sharing code and data from its modules. In order to alter the data used within a VisionEval module (i.e., an R Package) it must be repackaged, or re-built, using the new data. Otherwise, if only the source data is altered and not re-built, the VisionEval environment fails to recognize the updated data.</p>
</div>
<div id="how-are-packages-built" class="section level3" number="14.1.3">
<h3>
<span class="header-section-number">14.1.3</span> How are packages built?<a class="anchor" aria-label="anchor" href="#how-are-packages-built"><i class="fas fa-link"></i></a>
</h3>
<div id="build-vs-runtime-environment" class="section level4" number="14.1.3.1">
<h4>
<span class="header-section-number">14.1.3.1</span> Build vs Runtime Environment<a class="anchor" aria-label="anchor" href="#build-vs-runtime-environment"><i class="fas fa-link"></i></a>
</h4>
<p>It is crucial for users to understand the distinction between the VisionEval runtime environment and the VisionEval build environment. VisionEval begins as source code and data in the build environment from which the VisionEval R packages are built, and a runtime environment is created. VisionEval models can only be run from a runtime environment where the built packages are loaded (into an R session) and used by R to perform the model steps. The VisionEval runtime environment will be referred to as <em>VisionEval</em> from this point on in the document.</p>
</div>
</div>
</div>
<div id="where-do-we-start-the-re-building-process" class="section level2" number="14.2">
<h2>
<span class="header-section-number">14.2</span> Where do we Start the ‘Re-Building’ Process<a class="anchor" aria-label="anchor" href="#where-do-we-start-the-re-building-process"><i class="fas fa-link"></i></a>
</h2>
<p>The process for obtaining the source code used for rebuilding or updating any module within VisionEval depends on how a user obtained the current runtime:</p>
<ul>
<li><p>Users who installed a pre-built VisionEval runtime environment using a VisionEval installer.</p></li>
<li><p>Users who created a VisionEval runtime environment through a build environment by obtaining the source code from GitHub.</p></li>
</ul>
<p>The processes for both types of users are described below. Additionally, the process for advanced users who may want to build VisionEval natively from the source code for development or on non-Windows computers is described at the end of this section.</p>
<div id="users-who-installed-visioneval-through-the-visioneval-installer" class="section level3" number="14.2.1">
<h3>
<span class="header-section-number">14.2.1</span> Users who installed <em>VisionEval</em> through the VisionEval installer<a class="anchor" aria-label="anchor" href="#users-who-installed-visioneval-through-the-visioneval-installer"><i class="fas fa-link"></i></a>
</h3>
<p>Users at this point should have a full <em>VisionEval</em> installed and running. If not visit <a href="https://visioneval.org/docs/getting-started.html#installation-and-setup" class="uri">https://visioneval.org/docs/getting-started.html#installation-and-setup</a> and follow the path 1 listed to download and install the base model.</p>
<div id="software-requirements" class="section level4" number="14.2.1.1">
<h4>
<span class="header-section-number">14.2.1.1</span> Software Requirements<a class="anchor" aria-label="anchor" href="#software-requirements"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p><em>R</em> – R for windows can be downloaded here: <a href="https://cran.rstudio.com/" class="uri">https://cran.rstudio.com/</a> <em>(The most recent version is usually supported in VisionEval within a few weeks of its release). It is suggested to use an R version that aligns with the VE R version. The Cran website includes links to past versions although the most current is the one often highlighted on the first page.</em></p></li>
<li><p><em>RStudio –</em> RStudio for windows can be downloaded here: <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></p></li>
</ul>
</div>
<div id="rebuilding-package" class="section level4" number="14.2.1.2">
<h4>
<span class="header-section-number">14.2.1.2</span> (Re)Building Package<a class="anchor" aria-label="anchor" href="#rebuilding-package"><i class="fas fa-link"></i></a>
</h4>
<p>Rebuilding a package in this <em>VisionEval</em> setup will require source code for the specific build that was installed (specific R, operating system, etc.) which is made available in a zip file that you can get from <a href="https://github.com/VisionEval/VisionEval-Dev/releases">the Github release</a>. Be sure to pick the version corresponding your installed version of R and VisionEval. This zip file contains the source code and default data for all the VisionEval packages that can be easily installed in <em>VisionEval</em> using R native command “install.packages” or <a href="https://support.posit.co/hc/en-us/articles/200486518-Customizing-Package-Build-Options-in-the-RStudio-IDE">RStudio build tools</a>. The user can download and unzip the zip file into their <em>VisionEval</em> directory. After unzipping a <code>src</code> folder will be present alongside <code>ve-lib</code>. Each VisionEval package is present in a sub-folder of <code>src</code> and you can change files there and rebuild the package as described below.</p>
<p>The source code of these packages contains code and data upon which the modules are built. This data can then be updated with localized or custom data and the module can be rebuilt into <em>VisionEval</em>. The process of rebuilding is explained in more detail in the section of this document.</p>
</div>
</div>
<div id="users-who-created-visioneval-through-source-code-from-github" class="section level3" number="14.2.2">
<h3>
<span class="header-section-number">14.2.2</span> Users who created <em>VisionEval</em> through source code from GitHub<a class="anchor" aria-label="anchor" href="#users-who-created-visioneval-through-source-code-from-github"><i class="fas fa-link"></i></a>
</h3>
<p>For advanced users who have a complete <em>VisionEval</em> built using the source code from GitHub, the process for updating and rebuilding individual modules and packages can be done without the need to download additional source code material. A version of the source code, easily installable in R, is created during the “build process”.</p>
<p><em>Note: if you want to install a complete VisionEval model from the source code please see the section</em> <em>VisionEval Full Build Process.</em></p>
<div id="additional-software-requirements" class="section level4" number="14.2.2.1">
<h4>
<span class="header-section-number">14.2.2.1</span> Additional Software Requirements<a class="anchor" aria-label="anchor" href="#additional-software-requirements"><i class="fas fa-link"></i></a>
</h4>
<ul>
<li><p><em>RTools</em> – RTools for windows can be downloaded here: <a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/files/rtools43-5493-5475.exe" class="uri">https://cran.r-project.org/bin/windows/Rtools/rtools43/files/rtools43-5493-5475.exe</a>.</p></li>
<li><p><em>Git</em> – Git for windows can be downloaded here: <a href="https://git-scm.com/download/win" class="uri">https://git-scm.com/download/win</a>.</p></li>
</ul>
</div>
<div id="rebuilding-packages-using-package-sources" class="section level4" number="14.2.2.2">
<h4>
<span class="header-section-number">14.2.2.2</span> (Re)Building Packages Using Package Sources<a class="anchor" aria-label="anchor" href="#rebuilding-packages-using-package-sources"><i class="fas fa-link"></i></a>
</h4>
<p>The source code created during the build process can be used to rebuild packages in this <em>VisionEval</em> setup. The process of rebuilding is the same as before, the only difference is the location of the source code relative to the <em>VisionEval</em> setup.</p>
<p>VisionEval build environment allows for a single VisionEval package to be created, modified, and installed (aka “built”) into an existing <em>VisionEval</em> that had been previously created from a full install build. This is useful for creating or modifying single packages and their constituent modules within the VisionEval framework. The build process can be used to incorporate localized or custom data into <em>VisionEval</em> by making a change to a module and then rebuilding it.</p>
</div>
</div>
<div id="visioneval-full-build-process" class="section level3" number="14.2.3">
<h3>
<span class="header-section-number">14.2.3</span> VisionEval Full Build Process<a class="anchor" aria-label="anchor" href="#visioneval-full-build-process"><i class="fas fa-link"></i></a>
</h3>
<p>Advanced users may want to build VisionEval natively from the source code for development or on non-Windows computers. This process can take several hours the first time it runs. For more details, see instruction in <a href="https://github.com/VisionEval/VisionEval/blob/master/build/Building.md">build/Building.md</a>.</p>
<ol style="list-style-type: decimal">
<li><p>Install <a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/files/rtools43-5493-5475.exe">RTools</a>. The easiest way is to download and run the RTools windows install. RTool4.0 has been tested, but <a href="https://cran.r-project.org/bin/windows/Rtools/rtools43/files/rtools43-5493-5475.exe">RTool4.3</a> should also work.</p></li>
<li><p>Clone or “fork” a copy of the VisionEval from the Github repository (<a href="https://github.com/VisionEval/VisionEval" class="uri">https://github.com/VisionEval/VisionEval</a>) into a directory of your choice (e.g., <code>C:/Users/&lt;``user name``&gt;/Documents/VisionEval-Source</code>) using:</p></li>
</ol>
<ul>
<li>
<p><code>git clone ``git@github.com:VisionEval``/``VisionEval.git`` VisionEval-Source</code></p>
<ul>
<li><p>For developers, there is a separate development repository with the latest unreleased source code: <a href="https://github.com/VisionEval/VisionEval-Dev" class="uri">https://github.com/VisionEval/VisionEval-Dev</a></p></li>
<li><p>Users not familiar with <a href="https://git-scm.com/downloads">git</a> and GitHub can simply download the repository as a zip file (<a href="https://github.com/VisionEval/VisionEval/archive/refs/heads/master.zip" class="uri">https://github.com/VisionEval/VisionEval/archive/refs/heads/master.zip</a>). In either case, the download is very large (over 900MB compressed download and 3.4GB uncompressed on disk).</p></li>
</ul>
</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><p>Start VisionEval by double clicking the <code>VisionEval.RProj</code> file in the newly cloned <code>VisionEval-Source</code> directory.</p></li>
<li><p>Start the build process by entering <code>ve.build``()</code> into the console. This will start the process of downloading and installing every R package dependencies required by VisionEval as well as installing the VisionEval framework specific packages. The output will look something like this:</p></li>
</ol>
<ul>
<li>This will take a while, potentially over an hour. Once completed, you’ve successfully performed a full build install of the VisionEval runtime environment.</li>
</ul>
<ol start="5" style="list-style-type: decimal">
<li>A new folder called ‘built’ will be created your source directory, populated with a sub-folder for the R-version you used to build VisionEval with:\<br><code>VisionEval-Source\built\visioneval\&lt;your R version number e.g., 4.1.``3``&gt;\</code>
</li>
</ol>
<ul>
<li>
<p>This will contain a few key folders:</p>
<ul>
<li><p><code>src</code>: The VisionEval package source.</p></li>
<li><p><code>ve-lib</code>: The package library containing all built and installed R packages.</p></li>
<li><p><code>runtime</code>: The built model runtime.</p></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="ve-estimation.html"><span class="header-section-number">13</span> Estimation in VisionEval</a></div>
<div class="next"><a href="common-use-cases.html"><span class="header-section-number">15</span> Common Use Cases</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#ve-buildprocess"><span class="header-section-number">14</span> VisionEval Module Build Process</a></li>
<li>
<a class="nav-link" href="#rebuilding-visioneval"><span class="header-section-number">14.1</span> (Re)Building VisionEval</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#what-is-an-r-package"><span class="header-section-number">14.1.1</span> What is an R “package”?</a></li>
<li><a class="nav-link" href="#why-is-this-relevant"><span class="header-section-number">14.1.2</span> Why is this relevant?</a></li>
<li><a class="nav-link" href="#how-are-packages-built"><span class="header-section-number">14.1.3</span> How are packages built?</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#where-do-we-start-the-re-building-process"><span class="header-section-number">14.2</span> Where do we Start the ‘Re-Building’ Process</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#users-who-installed-visioneval-through-the-visioneval-installer"><span class="header-section-number">14.2.1</span> Users who installed VisionEval through the VisionEval installer</a></li>
<li><a class="nav-link" href="#users-who-created-visioneval-through-source-code-from-github"><span class="header-section-number">14.2.2</span> Users who created VisionEval through source code from GitHub</a></li>
<li><a class="nav-link" href="#visioneval-full-build-process"><span class="header-section-number">14.2.3</span> VisionEval Full Build Process</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/VisionEval/VisionEval-Docs//blob/master/10-build-process.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/VisionEval/VisionEval-Docs//edit/master/10-build-process.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>VisionEval User Guide</strong>" was written by VisionEval Pooled Fund Team. It was last built on 2025-03-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
